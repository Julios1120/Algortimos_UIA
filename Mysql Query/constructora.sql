CREATE DATABASE constructora;
use constructora;

CREATE TABLE PERSONA(IDPERSONA int auto_increment primary key, 
					NOMBRE VARCHAR (25) not null, 
					APELLIDO VARCHAR(25) not null, 
					EDAD INT not null, 
					DIRECCION VARCHAR(200) not null);

CREATE TABLE DEPARTAMENTO(IDDEPARTAMENTO INT auto_increment primary key,
						  NOMBRE VARCHAR(25) not null, 
						  DESCRIPCION VARCHAR(100) not null, 
						  IDUBICACION INT NOT NULL);

CREATE TABLE PROYECTO(IDPROYECTO INT auto_increment primary key, 
					  NOMBRE VARCHAR(100) NOT NULL, 
					  DESCRIPCION VARCHAR(200) NOT NULL, 
					  FECHAINICIO DATE NOT NULL, 
					  FECHAFIN DATE NOT NULL, 
					  PRESUPUESTO DOUBLE NOT NULL);

CREATE TABLE SUCURSAL(IDSUCURSAL INT auto_increment primary key, 
					  NOMBRE VARCHAR(25) NOT NULL, 
					  DIRECCION VARCHAR(200) NOT NULL, 
					  NUMEMPLEADOS INT NOT NULL);
                      
CREATE TABLE TRABAJADOR(IDTRABAJADOR INT auto_increment primary key, 
						PUESTO VARCHAR(25) not null, 
						SALARIO INT not null,
						IDDEPARTAMENTO INT NOT NULL,
						IDPROYECTO INT NOT NULL, 
						IDUBICACION INT NOT NULL, 
						IDPERSONA INT NOT NULL,
						FOREIGN KEY (IDDEPARTAMENTO) 
							REFERENCES DEPARTAMENTO(IDDEPARTAMENTO),
						FOREIGN KEY (IDPROYECTO) 
							REFERENCES PROYECTO(IDPROYECTO),
						FOREIGN KEY (IDUBICACION) 
							REFERENCES SUCURSAL(IDSUCURSAL)
							);

CREATE TABLE MAQUINARIA(IDMAQUINA INT auto_increment primary key, 
						NOMBRE VARCHAR(25) NOT NULL, 
						DESCRIPCION VARCHAR(25) NOT NULL, 
						SIFUNCIONA int NOT NULL, 
						IDTRABAJADOR INT NOT NULL,
						FOREIGN KEY (IDTRABAJADOR) 
							REFERENCES TRABAJADOR(IDTRABAJADOR));

INSERT INTO PERSONA VALUES (1, 'PEDRO', 'MOLINA',25, 'LOMAS DE SOTELO');
INSERT INTO PERSONA VALUES (2, 'SERGIO', 'VARGAS',24, 'LOMAS DE LA CRUZ');
INSERT INTO PERSONA VALUES (3, 'LUISA', 'SOLANO',27, 'LINDAVISTA');
INSERT INTO PERSONA VALUES (4, 'FRANCISCO', 'CRUZ',35, 'VASCO DE QUIROGA');
INSERT INTO PERSONA VALUES (5, 'ALFONSO', 'CALVO',56, 'LOMAS VERDES');
INSERT INTO SUCURSAL VALUES(1, 'INGENIERIA', 'SANTA FE',200);
INSERT INTO SUCURSAL VALUES(2, 'DIRECCION', 'REFORMA',500);
INSERT INTO SUCURSAL VALUES(3, 'MANTENIMIENTO', 'VALLEJO',2000);
INSERT INTO PROYECTO VALUES(1, 'REMODELACION CENTRO SANTA FE','CAMBIO VISTAS, AC Y MAS','2012-06-02','2015-05-21', 2033456.78);
INSERT INTO PROYECTO VALUES(2, 'REMODELACION CENTRAL ABASTOS','CREACION DE NUEVAS BODEGAS','2015-06-02','2017-05-21',3033456.78);
INSERT INTO PROYECTO VALUES(3, 'CREACION PASEO CHAPULTEPEC','REDUCCION DE CARRILES Y CREACION CC','2017-06-02','2020-05-21',56033456.78);
INSERT INTO PROYECTO VALUES(4, 'REMODELACION METRO LINEA 12','RECOMPONER RIELES DESTROZADOS','2012-09-02','2015-05-23',22033456.78);
INSERT INTO PROYECTO VALUES(5, 'CREACION TREN TOLUCA','CONEXION DE TOLUCA A SANTA FE','2014-06-02','2017-05-21',452033456.78);
INSERT INTO PROYECTO VALUES(6, 'DESTRUCCION ESTELA DE LA LUZ','CONSTRUIR ALGO MAS UTIL Y DE BENEFICIO','2014-06-02','2015-12-21',233456.78);
INSERT INTO PROYECTO VALUES(7, 'ACABADOS TORRE BBVA REFORMA','TERMINAR LA CONSTRUCCION DE LA TORRE','2012-06-02','2015-11-21',323456.78);
INSERT INTO PROYECTO VALUES(8, 'RECONSTRUCCION DE LA ALAMEDA CENTRAL','AGREGAR UN SEGUNDO PISO','2015-06-02','2020-05-21',2033456.78);
INSERT INTO DEPARTAMENTO VALUES(1,'CONSTRUCCION', 'ENCARGADO DEL LEVANTAMIENTO DEL SITIO', 1);
INSERT INTO DEPARTAMENTO VALUES(2,'DESARROLLO Y PLANEACION', 'ENCARGADO DEL PLANEAMIENTO DEL SITIO', 1);
INSERT INTO DEPARTAMENTO VALUES(3,'CONTADURIA', 'ENCARGADO DE LA ADMNISTRACION DEL SITIO', 1);
INSERT INTO DEPARTAMENTO VALUES(4,'ALTA DIRECCION', 'ENCARGADO DE CONTROLAR LA CONSTRUCCION DEL SITIO', 1);
INSERT INTO TRABAJADOR VALUES(1,'OBRERO', 15000.34, 1,1,1,1);
INSERT INTO TRABAJADOR VALUES(2,'OBRERO', 15000.34, 1,3,3,2);
INSERT INTO TRABAJADOR VALUES(3,'INGENIERA', 35000.34, 2,5,2,3);
INSERT INTO TRABAJADOR VALUES(4,'CONTADOR', 25000.34, 3,7,2,4);
INSERT INTO TRABAJADOR VALUES(5,'DIRECTIVO', 55000.34, 4,8,2,5);
INSERT INTO MAQUINARIA VALUES (1,'APLANADORA','APLANA CALLES', 1, 1);
INSERT INTO MAQUINARIA VALUES (2,'REVOLVEDORA','HORMIGON ARMADO', 1, 1);
INSERT INTO MAQUINARIA VALUES (3,'GRUA','LEVANTA BALLENAS', 0, 2);
INSERT INTO MAQUINARIA VALUES (4,'CAMION DE VOLTEO','MAXIMA CARGA 10TON', 1, 2);
